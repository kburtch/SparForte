<HEAD><TITLE>gss.sp</TITLE></HEAD>
<BODY>
<HR><DIV ALIGN="center"><H1> File : gss.sp </H1></DIV><HR>
<DIV ALIGN="center">
<TABLE CELLSPACING="0" CELLPADDING="3" WIDTH="80%" SUMMARY="">
<TR>
<TD BGCOLOR="black"><SPAN STYLE="color: #00CC00">
<PRE>
$ spar gss
 3
 5
 6
-2
-1
 4

</PRE>
</SPAN>
</TD>
</TR>
</TABLE>
</DIV>
<HR>
<PRE>
#!/usr/local/bin/spar

<b>pragma</b> annotate( summary, "gss" )
       @( description, "greatest sequential sum" )
       @( description, "Given a sequence of integers, find a continuous subsequence which maximizes the" )
       @( description, "sum of its elements, that is, the elements of no other single subsequence add" )
       @( description, "up to a value larger than this one. An empty subsequence is considered to have" )
       @( description, "the sum 0; thus if all elements are negative, the result must be the empty" )
       @( description, "sequence." )
       @( see_also, "http://rosettacode.org/wiki/Greatest_subsequential_sum" )
       @( author, "Ken O. Burtch" );
<b>pragma</b> license( unrestricted );

<b>pragma</b> restriction( no_external_commands );

<b>procedure</b> gss <b>is</b>

  <b>type</b> int_array <b>is</b> <b>array</b>( 1..11 ) <b>of</b> integer;

  a : <b>constant</b> int_array := (-1 , -2 , 3 , 5 , 6 , -2 , -1 , 4 , -4 , 2 , -1);
  length : <b>constant</b> integer := arrays.length( a );

  beginmax : integer := 0;
  endmax : integer := -1;
  maxsum : integer := 0;
  running_sum : integer := 0;

<b>begin</b>

 <b>for</b> start <b>in</b> arrays.first(a)..length-1 <b>loop</b>
     running_sum := 0;
     <b>for</b> finish <b>in</b> start..length-1 <b>loop</b>
        running_sum := @ + a(finish);
        <b>if</b> running_sum &gt; maxsum <b>then</b>
           maxsum := running_sum;
           beginmax := start;
           endmax := finish;
        <b>end</b> <b>if</b>;
     <b>end</b> <b>loop</b>;
  <b>end</b> <b>loop</b>;

  <b>for</b> i <b>in</b> beginmax..endmax <b>loop</b>
      ? a(i);
  <b>end</b> <b>loop</b>;

<b>end</b> gss;

<FONT COLOR=green><EM>-- VIM editor formatting instructions</EM></FONT>
<FONT COLOR=green><EM>-- vim: ft=spar</EM></FONT>

</PRE></BODY></HTML>
