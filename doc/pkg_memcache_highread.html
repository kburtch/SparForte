<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
  "http://www.w3.org/TR/html4/transitional.dtd">
<html lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
    <META NAME="description" CONTENT="SparForte language documentation">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>SparForte - Packages - Memcache High Read</title>
	<link rel="StyleSheet" type="text/css" media="screen" href="art/sparforte.css">
	<link rel="index" href="packages.html" />
	<link rel="prev" href="pkg_memcache.html" />
	<link rel="next" href="pkg_mysql.html" />
</head>
<body bgcolor="#FFFFFF"><a name="top"></a>
	<table width="100%" cellspacing="0" cellpadding="0" summary="page layout">
		<tr><td align="left"><img src="art/sparforte.png" alt="[SparForte]"></td><td align="right"><img src="art/header_cloud.png" alt="[Banner]"></td></tr>
		<tr><td background="art/header_border.png" height="10" colspan="2"></td></tr>
		<tr><td colspan="2"><table width="100%" border="0" cellspacing="0" cellpadding="0" summary="top menu">
			<tr>
				<td width="10"><img src="art/menu_left.png" alt="[Top Main Menu]"></td>
				<td width="85" background="art/menu_border.png" align="center"><a class="menutext" href="intro_preface.html">Intro</a></td>
				<td background="art/menu_border.png" align="center"><span class="menutext">|</span></td>
				<td width="85" background="art/menu_border.png" align="center"><a class="menutext" href="tutorial_1.html">Tutorials</a></td>
				<td background="art/menu_border.png" align="center"><span class="menutext">|</span></td>
				<td width="85" background="art/menu_border.png" align="center"><a class="menutext" href="ref_adascript.html">Reference</a></td>
				<td background="art/menu_border.png" align="center"><span class="menutext">|</span></td>
				<td width="85" background="art/menu_border.png" align="center"><a class="menutext" href="packages.html"><b>Packages</b></a></td>
				<td background="art/menu_border.png" align="center"><span class="menutext">|</span></td>
				<td width="85" background="art/menu_border.png" align="center"><a class="menutext" href="../examples/index.html">Examples</a></td>
				<td background="art/menu_border.png" align="center"><span class="menutext">|</span></td>
				<td width="85" background="art/menu_border.png" align="center"><a class="menutext" href="cont_vision.html">Contributors</a></td>
				<td background="art/menu_border.png" align="center">&nbsp;</td>
				<td background="art/menu_border.png" align="right"><a href="pkg_memcache.html"><img src="art/left_arrow.png" width="27" height="24" alt="[Back Page]" border="0"></a><span class="menutext">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="pkg_mysql.html"><img src="art/right_arrow.png" width="27" height="24" alt="[Next Page]" border="0"></a></td>
				<td background="art/menu_border.png">&nbsp;</td>
</tr></table></td></tr>
	</table>
	<noscript>
	<a href="#submenu">[Jump to Submenu]</a>
	<hr />
	</noscript>
	<table width="100%" border="0" cellspacing="0" cellpadding="0" summary="content and right submenu">
		<tr>
			<td align="left" valign="top">
	<!-- Content Area -->
<h2><a NAME="4.14"></a>Memcache.Highread Package</h2>

<p>A package for storing data in memcached with optional redundancy, optimized for
more reads than writes.</p>

<p><u>GCC Ada Equivalent</u>: N/A<br>
<u>See Also</u>: memcache</p>

        <center>
        <div class="code">
<pre>
  <a href="#memcache.highread.add">add( cl, k, v )</a>            <a href="#memcache.highread.register_alpha_server">register_alpha_server( cl, h, p )</a>
  <a href="#memcache.highread.append">append( cl, k, v )</a>         <a href="#memcache.highread.register_beta_server">register_beta_server( cl, h, p )</a>
  <a href="#memcache.highread.clear_servers">clear_servers( cl )</a>        <a href="#memcache.highread.replace">replace( cl, k, v )</a>
  <a href="#memcache.highread.delete">delete( cl, k )</a>            <a href="#memcache.highread.set">set( cl, k, v )</a>
  <a href="#memcache.highread.flush">flush( cl )</a>                <a href="#memcache.highread.set_cluster_name">set_cluster_name( cl, s )</a>
  <a href="#memcache.highread.get">v := get( cl, k )</a>          <a href="#memcache.highread.set_cluster_type">set_cluster_type( cl, e )</a>
  <a href="#memcache.highread.new_cluster">cl := new_cluster</a>          <a href="#memcache.highread.stats">s := stats( cl )</a>
  <a href="#memcache.highread.prepend">prepend( cl, k, v )</a>        <a href="#memcache.highread.version">s := version( cl )</a>
</pre>
        &nbsp;<br>
        <div class="code_caption">
        <b>Help Command</b>: Contents of the memcache.highread package</span>
        </div>
        </div>
        </center>

<p>Memcached (or the Memcache Daemon) is a general-purpose networked memory
caching system that was originally developed by Danga Interactive for
LiveJournal, but is now used by many other sites. It is often used to speed up
dynamic database-driven websites by caching data and objects in RAM to reduce the
number of times an external data source (such as a database or API) must be read.
Memcached has been used by web sites including YouTube, Facebook and Twitter.</p>

<p>Values are store as keys (names or labels) and the associated value.</p>

<p>SparForte supports memcached natively (that is, using pragmas you can import
and export variable to/from Memcached.) The memcached support is built on the
PegaSoft PegaSock socket library, which supports local memcached caching as well
as distributed, redundant memcached caching clusters.</p>

<p>The Memcache.highread package is a binding to the PegaSock library, giving a more
flexible interface to memcache than the pragmas provide.  For example, you
can use any keys you want, rather than using the variable name as the key.
The names of the procedures and functions are equivalent to the commands
of the memcached protocol: you can find out more information on them by
consulting the memcached documentation.</p>

<p>The following is a trivial example with one memcached server running
on localhost port 11211.</p>

        <center>
        <div class="code">
                <p class="code">=&gt; c := memcache.highread.new_cluster<br>
=&gt; (Assuming c is a new memcache.memcache_dual_cluster variable)<br>
=&gt; memcache.highread.register_alpha_server( c, "localhost", 11211 )<br>
=&gt; memcache.highread.register_beta_server( c, "localhost", 11212 )<br>
=&gt; key : string := "candy"<br>
=&gt; memcache.highread.set( c, key, "cane" )<br>
=&gt; ? memcache.highread.get( c, key )<br>
cane<br>
=&gt;<br>&nbsp;<br>
                </p>
        <div class="code_caption">
                <b>Example</b>: Setting key "candy" to value "cane" and retrieving it again</span>
        </div>
        </div>
        </center>


<p>Normally a memcache cluster would have two or more servers.  The key
would automatically be stored on two servers.  If a server in the cluster
fails, a program can still retrieve the data.</p>

<p>The highread package uses two normal memcache clusters, using them as if
they were a single cluster.  Data is stored up to four times in servers, and
the get function can read from any of the four servers.  This makes it a
good choice for high redundancy tasks, or takes where there are more reads
than writes.</p>

<p>PegaSock implements an escalating back off mechanism: if a server cannot
be accessed, it is marked as down.  After a suitable period, PegaSock will
attempt to reconnect.  If both servers containing the data are down, the next
few memcache calls automatically fail.  If the servers are still down, it
backs off for a longer period of time.  This is done to prevent a cascading
failure.</p>

<p>Some functionality (such as cas) is not implemented.</p>

<p>Because memcached has no security features, running in a restricted
shell will disable the memcache.highread package.  It can also be
disabled with pragma restriction.</p>

<a name="memcache.highread.add"></a><h3>memcache.highread.add( cl, k, v )</h3>
<table cellspacing="0" cellpadding="0" width="98%" summary="package call">
<tr>
<td width="15%">&nbsp;</td>
<td><p>Store value v for key k in memcache cluster cl if the key does not exist.
Otherwise, an error is displayed but execution continues.</p></td>
</tr><tr>
<td><p class="pkg_label">Example</p></td>
<td><span class="code">memcache.highread.add( mc_cluster, "company_name", "PegaSoft"  );</span></p>
</tr><tr>
<td><p class="pkg_label">Parameters</p></td>
<td><table CELLSPACING=0 CELLPADDING=0 WIDTH="100%" border="0" >
<tr>
<td><span class="pkg_param">Param</span></td>
<td><span class="pkg_param">Mode</span></td>
<td><span class="pkg_param">Type</span></td>
<td><span class="pkg_param">Default</span></td>
<td><span class="pkg_param">Description</span></td>
</tr><tr>
<td><span>cl</span></td>
<td><span>in out</span></td>
<td><span>memcache.memcache_dual_cluster</span></td>
<td><span>required</span></td>
<td><span>the memcache cluster to use</span></td>
</tr><tr>
<td><span>k</span></td>
<td><span>in</span></td>
<td><span>any string type</span></td>
<td><span>required</span></td>
<td><span>the name to identify the value</span></td>
</tr><tr>
<td><span>v</span></td>
<td><span>in</span></td>
<td><span>any string type</span></td>
<td><span>required</span></td>
<td><span>the value to store</span></td>
</tr>
</table></td>
</tr><tr>
<td><p class="pkg_label">Exceptions</p></td>
<td><p>An exception is thrown if no servers are defined in either cluster within the dual cluster</p></td>
</tr><tr>
<td><p class="pkg_label">Restrictions</p></td>
<td><p>Not allowed in a restricted shell or with the no_memcache restriction</p>
</tr><tr>
<td><p class="pkg_label">See Also</p></td>
<td><p><a href="#memcache.highread.set">memcache.highread.set</a><br><a href="#memcache.highread.replace">memcache.highread.replace</a></p>
</tr><tr>
<td><p class="pkg_label">Compare With</p></td>
<td><p>Ada: PegaSock.Memcache.Highread.Add</p></td>
</tr>
</table>

<a name="memcache.highread.append"></a><h3>memcache.highread.append( cl, k, v )</h3>
<table cellspacing="0" cellpadding="0" width="98%" summary="package call">
<tr>
<td width="15%">&nbsp;</td>
<td><p>Concatenate value v to the end of the current value for key k in
memcache cluster cl.</p></td>
</tr><tr>
<td><p class="pkg_label">Example</p></td>
<td><span class="code">memcache.highread.set( mc_cluster, "company_name", "PegaSoft"  );<br><a href="#memcache.highread.append">memcache.highread.append</a>( mc_cluster, "company_name", " Inc.";<br>-- company_name is "PegaSoft Inc." </span></p>
</tr><tr>
<td><p class="pkg_label">Parameters</p></td>
<td><table CELLSPACING=0 CELLPADDING=0 WIDTH="100%" border="0" >
<tr>
<td><span class="pkg_param">Param</span></td>
<td><span class="pkg_param">Mode</span></td>
<td><span class="pkg_param">Type</span></td>
<td><span class="pkg_param">Default</span></td>
<td><span class="pkg_param">Description</span></td>
</tr><tr>
<td><span>cl</span></td>
<td><span>in out</span></td>
<td><span>memcache.memcache_dual_cluster</span></td>
<td><span>required</span></td>
<td><span>the memcache cluster to use</span></td>
</tr><tr>
<td><span>k</span></td>
<td><span>in</span></td>
<td><span>any string type</span></td>
<td><span>required</span></td>
<td><span>the name to identify the value</span></td>
</tr><tr>
<td><span>v</span></td>
<td><span>in</span></td>
<td><span>any string type</span></td>
<td><span>required</span></td>
<td><span>the value to append</span></td>
</tr>
</table></td>
</tr><tr>
<td><p class="pkg_label">Exceptions</p></td>
<td><p>An exception is thrown if no servers are defined in either cluster within the dual cluster</p></td>
</tr><tr>
<td><p class="pkg_label">Restrictions</p></td>
<td><p>Not allowed in a restricted shell or with the no_memcache restriction</p>
</tr><tr>
<td><p class="pkg_label">See Also</p></td>
<td><p><a href="#memcache.highread.prepend">memcache.highread.prepend</a></p>
</tr><tr>
<td><p class="pkg_label">Compare With</p></td>
<td><p>Ada: PegaSock.Memcache.Append</p></td>
</tr>
</table>

<a name="memcache.highread.clear_servers"></a><h3>memcache.highread.clear_servers( cl )</h3>
<table cellspacing="0" cellpadding="0" width="98%" summary="package call">
<tr>
<td width="15%">&nbsp;</td>
<td><p>Delete all registered servers for memcache cluster cl.  The data is not
flushed from memcached.</p></td>
</tr><tr>
<td><p class="pkg_label">Example</p></td>
<td><span class="code">memcache.highread.clear_servers( cl ); -- there are now no servers in the cluster</span></p>
</tr><tr>
<td><p class="pkg_label">Parameters</p></td>
<td><table CELLSPACING=0 CELLPADDING=0 WIDTH="100%" border="0" >
<tr>
<td><span class="pkg_param">Param</span></td>
<td><span class="pkg_param">Mode</span></td>
<td><span class="pkg_param">Type</span></td>
<td><span class="pkg_param">Default</span></td>
<td><span class="pkg_param">Description</span></td>
</tr><tr>
<td><span>cl</span></td>
<td><span>in out</span></td>
<td><span>memcache.memcache_dual_cluster</span></td>
<td><span>required</span></td>
<td><span>the memcache cluster to use</span></td>
</tr>
</table></td>
</tr><tr>
<td><p class="pkg_label">Exceptions</p></td>
<td><p>-</p>
</tr><tr>
<td><p class="pkg_label">Restrictions</p></td>
<td><p>Not allowed in a restricted shell or with the no_memcache restriction</p>
</tr><tr>
<td><p class="pkg_label">See Also</p></td>
<td><p><a href="#memcache.highread.register_alpha_server">memcache.highread.register_alpha_server</a><br><a href="#memcache.highread.register_beta_server">memcache.highread.register_beta_server</a></p></td>
</tr><tr>
<td><p class="pkg_label">Compare With</p></td>
<td><p>Ada: Pegasock.Memcache.Highread.Clear_Servers</p></td>
</tr>
</table>

<a name="memcache.highread.delete"></a><h3>memcache.highread.delete( cl, k )</h3>
<table cellspacing="0" cellpadding="0" width="98%" summary="package call">
<tr>
<td width="15%">&nbsp;</td>
<td><p>Remove key k from memcache cluster cl, discarding the key's value.</p></td>
</tr><tr>
<td><p class="pkg_label">Example</p></td>
<td><span class="code">memcache.highread.delete( mc_cluster, "company_name", "PegaSoft"  );<br>-- company_name no longer exists</span></p>
</tr><tr>
<td><p class="pkg_label">Parameters</p></td>
<td><table CELLSPACING=0 CELLPADDING=0 WIDTH="100%" border="0" >
<tr>
<td><span class="pkg_param">Param</span></td>
<td><span class="pkg_param">Mode</span></td>
<td><span class="pkg_param">Type</span></td>
<td><span class="pkg_param">Default</span></td>
<td><span class="pkg_param">Description</span></td>
</tr><tr>
<td><span>cl</span></td>
<td><span>in out</span></td>
<td><span>memcache.memcache_dual_cluster</span></td>
<td><span>required</span></td>
<td><span>the memcache cluster to use</span></td>
</tr><tr>
<td><span>k</span></td>
<td><span>in</span></td>
<td><span>any string type</span></td>
<td><span>required</span></td>
<td><span>the key name to unset</span></td>
</tr>
</table></td>
</tr><tr>
<td><p class="pkg_label">Exceptions</p></td>
<td><p>An exception is thrown if no servers are defined in either cluster within the dual cluster</p></td>
</tr><tr>
<td><p class="pkg_label">Restrictions</p></td>
<td><p>Not allowed in a restricted shell or with the no_memcache restriction</p>
</tr><tr>
<td><p class="pkg_label">See Also</p></td>
<td><p><a href="#memcache.highread.flush">memcache.highread.flush</a></p>
</tr><tr>
<td><p class="pkg_label">Compare With</p></td>
<td><p>Ada: PegaSock.Memcache.Highread.Delete</p></td>
</tr>
</table>

<a name="memcache.highread.flush"></a><h3>memcache.highread.flush( cl )</h3>
<table cellspacing="0" cellpadding="0" width="98%" summary="package call">
<tr>
<td width="15%">&nbsp;</td>
<td><p>Delete all keys.  The memory is not actually freed: all keys are
marked invalid and are gradually replaced as new items are stored.</p></td>
</tr><tr>
<td><p class="pkg_label">Example</p></td>
<td><span class="code">memcache.highread.flush( mc_cluster );-- all keys are destroyed</span></p>
</tr><tr>
<td><p class="pkg_label">Parameters</p></td>
<td><table CELLSPACING=0 CELLPADDING=0 WIDTH="100%" border="0" >
<tr>
<td><span class="pkg_param">Param</span></td>
<td><span class="pkg_param">Mode</span></td>
<td><span class="pkg_param">Type</span></td>
<td><span class="pkg_param">Default</span></td>
<td><span class="pkg_param">Description</span></td>
</tr><tr>
<td><span>cl</span></td>
<td><span>in out</span></td>
<td><span>memcache.memcache_dual_cluster</span></td>
<td><span>required</span></td>
<td><span>the memcache cluster to use</span></td>
</tr>
</table></td>
</tr><tr>
<td><p class="pkg_label">Exceptions</p></td>
<td><p>An exception is thrown if no servers are defined in either cluster within the dual cluster</p></td>
</tr><tr>
<td><p class="pkg_label">Restrictions</p></td>
<td><p>Not allowed in a restricted shell or with the no_memcache restriction</p>
</tr><tr>
<td><p class="pkg_label">See Also</p></td>
<td><p><a href="#memcache.highread.delete">memcache.highread.delete</a></p>
</tr><tr>
<td><p class="pkg_label">Compare With</p></td>
<td><p>Ada: PegaSock.Memcache.Highread.Flush</p></td>
</tr>
</table>

<a name="memcache.highread.get"></a><h3>v := memcache.highread.get( cl, k )</h3>
<table cellspacing="0" cellpadding="0" width="98%" summary="package call">
<tr>
<td width="15%">&nbsp;</td>
<td><p>Look up the value previously stored for the key k in memcache cluster cl
and return it.  If the key does not exist, return an empty string.  If there
are two or more servers in the cluster, get will alternate between the servers
with the key in order to distribute load.</p></td>
</tr><tr>
<td><p class="pkg_label">Example</p></td>
<td><span class="code">memcache.highread.set( mc_cluster, "company_name", "PegaSoft"  );<br>? memcache.highread.get( mc_cluster, "company_name" );<br>-- displays "PegaSoft" </span></p>
</tr><tr>
<td><p class="pkg_label">Parameters</p></td>
<td><table CELLSPACING=0 CELLPADDING=0 WIDTH="100%" border="0" >
<tr>
<td><span class="pkg_param">Param</span></td>
<td><span class="pkg_param">Mode</span></td>
<td><span class="pkg_param">Type</span></td>
<td><span class="pkg_param">Default</span></td>
<td><span class="pkg_param">Description</span></td>
</tr><tr>
<td><span>cl</span></td>
<td><span>in out</span></td>
<td><span>memcache.memcache_dual_cluster</span></td>
<td><span>required</span></td>
<td><span>the memcache cluster to use</span></td>
</tr><tr>
<td><span>k</span></td>
<td><span>in</span></td>
<td><span>any string type</span></td>
<td><span>required</span></td>
<td><span>the name to identify the value</span></td>
</tr><tr>
<td><span>v</span></td>
<td><span>return value</span></td>
<td><span>any string type</span></td>
<td><span>required</span></td>
<td><span>the value</span></td>
</tr>
</table></td>
</tr><tr>
<td><p class="pkg_label">Exceptions</p></td>
<td><p>An exception is thrown if no servers are defined in either cluster within the dual cluster</p></td>
</tr><tr>
<td><p class="pkg_label">See Also</p></td>
<td><p>-</p>
</tr><tr>
<td><p class="pkg_label">Compare With</p></td>
<td><p>Ada: PegaSock.Memcache.Highread.Get</p></td>
</tr>
</table>

<a name="memcache.highread.new_cluster"></a><h3>cl := memcache.highread.new_cluster</h3>
<table cellspacing="0" cellpadding="0" width="98%" summary="package call">
<tr>
<td width="15%">&nbsp;</td>
<td><p>Allocate a new memcache cluster record.  The record is used to identify
servers and manage connections.</p></td>
</tr><tr>
<td><p class="pkg_label">Example</p></td>
<td><span class="code">mc_cluster := memcache.highread.new_cluster;</span></p>
</tr><tr>
<td><p class="pkg_label">Parameters</p></td>
<td><table CELLSPACING=0 CELLPADDING=0 WIDTH="100%" border="0" >
<tr>
<td><span class="pkg_param">Param</span></td>
<td><span class="pkg_param">Mode</span></td>
<td><span class="pkg_param">Type</span></td>
<td><span class="pkg_param">Default</span></td>
<td><span class="pkg_param">Description</span></td>
</tr><tr>
<td><span>cl</span></td>
<td><span>return value</span></td>
<td><span>memcache.memcache_dual_cluster</span></td>
<td><span>required</span></td>
<td><span>the new memcache cluster</span></td>
</tr>
</table></td>
</tr><tr>
<td><p class="pkg_label">Exceptions</p></td>
<td><p>An exception is thrown if no servers are defined in either cluster within the dual cluster</p></td>
</tr><tr>
<td><p class="pkg_label">Restrictions</p></td>
<td><p>Not allowed in a restricted shell or with the no_memcache restriction</p>
</tr><tr>
<td><p class="pkg_label">Implementation Notes</p></td>
<td><p>Because the memcache_cluster record is private, SparForte allocates
clusters internally using a linked list.  The records are not freed until
the script execution end.</p>
</tr><tr>
<td><p class="pkg_label">See Also</p></td>
<td><p>-</p>
</tr><tr>
<td><p class="pkg_label">Compare With</p></td>
<td><p>Ada: N/A</p></td>
</tr>
</table>

<a name="memcache.highread.prepend"></a><h3>memcache.highread.prepend( cl, k, v )</h3>
<table cellspacing="0" cellpadding="0" width="98%" summary="package call">
<tr>
<td width="15%">&nbsp;</td>
<td><p>Concatenate value v to the head of the current value for key k in
memcache cluster cl.</p></td>
</tr><tr>
<td><p class="pkg_label">Example</p></td>
<td><span class="code">memcache.highread.set( mc_cluster, "company_name", "PegaSoft"  );<br><a href="#memcache.highread.prepend">memcache.highread.prepend</a>( mc_cluster, "company_name", "This is " );<br>-- company_name is "This is PegaSoft" </span></p>
</tr><tr>
<td><p class="pkg_label">Parameters</p></td>
<td><table CELLSPACING=0 CELLPADDING=0 WIDTH="100%" border="0" >
<tr>
<td><span class="pkg_param">Param</span></td>
<td><span class="pkg_param">Mode</span></td>
<td><span class="pkg_param">Type</span></td>
<td><span class="pkg_param">Default</span></td>
<td><span class="pkg_param">Description</span></td>
</tr><tr>
<td><span>cl</span></td>
<td><span>in out</span></td>
<td><span>memcache.memcache_dual_cluster</span></td>
<td><span>required</span></td>
<td><span>the memcache cluster to use</span></td>
</tr><tr>
<td><span>k</span></td>
<td><span>in</span></td>
<td><span>any string type</span></td>
<td><span>required</span></td>
<td><span>the name to identify the value</span></td>
</tr><tr>
<td><span>v</span></td>
<td><span>in</span></td>
<td><span>any string type</span></td>
<td><span>required</span></td>
<td><span>the value to prepend</span></td>
</tr>
</table></td>
</tr><tr>
<td><p class="pkg_label">Exceptions</p></td>
<td><p>An exception is thrown if no servers are defined in either cluster within the dual cluster</p></td>
</tr><tr>
<td><p class="pkg_label">Restrictions</p></td>
<td><p>Not allowed in a restricted shell or with the no_memcache restriction</p>
</tr><tr>
<td><p class="pkg_label">See Also</p></td>
<td><p><a href="#memcache.highread.append">memcache.highread.append</a></p>
</tr><tr>
<td><p class="pkg_label">Compare With</p></td>
<td><p>Ada: PegaSock.Memcache.Highspeed.Prepend</p></td>
</tr>
</table>

<a name="memcache.highread.register_alpha_server"></a><h3>memcache.highread.register_alpha_server( cl, h, p )</h3>
<table cellspacing="0" cellpadding="0" width="98%" summary="package call">
<tr>
<td width="15%">&nbsp;</td>
<td><p>Identify a new server to use in the memcache cluster.  The server is
identified by hostname h and TCP/IP port p.  The servers should always be
registered in the same order for this cluster.  No network connection is
opened: network connections are opened when data is read or written.  Do not
register the same server twice.</p></td>
</tr><tr>
<td><p class="pkg_label">Example</p></td>
<td><span class="code">memcache.highread.register_alpha_server( mc_cluster, "memcached1.somecompany.com", 11211 );</span></p>
</tr><tr>
<td><p class="pkg_label">Parameters</p></td>
<td><table CELLSPACING=0 CELLPADDING=0 WIDTH="100%" border="0" >
<tr>
<td><span class="pkg_param">Param</span></td>
<td><span class="pkg_param">Mode</span></td>
<td><span class="pkg_param">Type</span></td>
<td><span class="pkg_param">Default</span></td>
<td><span class="pkg_param">Description</span></td>
</tr><tr>
<td><span>cl</span></td>
<td><span>in out</span></td>
<td><span>memcache.memcache_dual_cluster</span></td>
<td><span>required</span></td>
<td><span>the memcache cluster to use</span></td>
</tr><tr>
<td><span>h</span></td>
<td><span>in</span></td>
<td><span>any string type</span></td>
<td><span>required</span></td>
<td><span>the host name</span></td>
</tr><tr>
<td><span>p</span></td>
<td><span>in</span></td>
<td><span>natural</span></td>
<td><span>required</span></td>
<td><span>the TCP/IP port</span></td>
</tr>
</table></td>
</tr><tr>
<td><p class="pkg_label">Exceptions</p></td>
<td><p>An exception is raised if a server is registered twice.</p>
</tr><tr>
<td><p class="pkg_label">Restrictions</p></td>
<td><p>Not allowed in a restricted shell or with the no_memcache restriction</p>
</tr><tr>
<td><p class="pkg_label">See Also</p></td>
<td><p><a href="#memcache.highread.clear_servers">memcache.highread.clear_servers</a></p>
</tr><tr>
<td><p class="pkg_label">Compare With</p></td>
<td><p>Ada: PegaSock.Memcache.Highread.RegisterBetaServer</p></td>
</tr>
</table>

<a name="memcache.highread.register_beta_server"></a><h3>memcache.highread.register_beta_server( cl, h, p )</h3>
<table cellspacing="0" cellpadding="0" width="98%" summary="package call">
<tr>
<td width="15%">&nbsp;</td>
<td><p>Identify a new server to use in the memcache cluster.  The server is
identified by hostname h and TCP/IP port p.  The servers should always be
registered in the same order for this cluster.  No network connection is
opened: network connections are opened when data is read or written.  Do not
register the same server twice.</p></td>
</tr><tr>
<td><p class="pkg_label">Example</p></td>
<td><span class="code">memcache.highread.register_beta_server( mc_cluster, "memcached2.somecompany.com", 11211 );</span></p>
</tr><tr>
<td><p class="pkg_label">Parameters</p></td>
<td><table CELLSPACING=0 CELLPADDING=0 WIDTH="100%" border="0" >
<tr>
<td><span class="pkg_param">Param</span></td>
<td><span class="pkg_param">Mode</span></td>
<td><span class="pkg_param">Type</span></td>
<td><span class="pkg_param">Default</span></td>
<td><span class="pkg_param">Description</span></td>
</tr><tr>
<td><span>cl</span></td>
<td><span>in out</span></td>
<td><span>memcache.memcache_dual_cluster</span></td>
<td><span>required</span></td>
<td><span>the memcache cluster to use</span></td>
</tr><tr>
<td><span>h</span></td>
<td><span>in</span></td>
<td><span>any string type</span></td>
<td><span>required</span></td>
<td><span>the host name</span></td>
</tr><tr>
<td><span>p</span></td>
<td><span>in</span></td>
<td><span>natural</span></td>
<td><span>required</span></td>
<td><span>the TCP/IP port</span></td>
</tr>
</table></td>
</tr><tr>
<td><p class="pkg_label">Exceptions</p></td>
<td><p>An exception is raised if a server is registered twice.</p>
</tr><tr>
<td><p class="pkg_label">Restrictions</p></td>
<td><p>Not allowed in a restricted shell or with the no_memcache restriction</p>
</tr><tr>
<td><p class="pkg_label">See Also</p></td>
<td><p><a href="#memcache.highread.clear_servers">memcache.highread.clear_servers</a></p>
</tr><tr>
<td><p class="pkg_label">Compare With</p></td>
<td><p>Ada: PegaSock.Memcache.Highread.RegisterAlphaServer</p></td>
</tr>
</table>

<a name="memcache.highread.replace"></a><h3>memcache.highread.replace( cl, k, v )</h3>
<table cellspacing="0" cellpadding="0" width="98%" summary="package call">
<tr>
<td width="15%">&nbsp;</td>
<td><p>Overwrite the current value of key k memcache cluster cl with value v, if
a value already exists.  If the key doesn't exist, a warning is displayed but
execution continues.</p></td>
</tr><tr>
<td><p class="pkg_label">Example</p></td>
<td><span class="code">memcache.highread.set( mc_cluster, "company_name", "PegaSoft"  );<br><a href="#memcache.highread.replace">memcache.highread.replace</a>( mc_cluster, "company_name", "MegaCorp";<br>-- company_name is "MegaCorp"</span></p>
</tr><tr>
<td><p class="pkg_label">Parameters</p></td>
<td><table CELLSPACING=0 CELLPADDING=0 WIDTH="100%" border="0" >
<tr>
<td><span class="pkg_param">Param</span></td>
<td><span class="pkg_param">Mode</span></td>
<td><span class="pkg_param">Type</span></td>
<td><span class="pkg_param">Default</span></td>
<td><span class="pkg_param">Description</span></td>
</tr><tr>
<td><span>cl</span></td>
<td><span>in out</span></td>
<td><span>memcache.memcache_dual_cluster</span></td>
<td><span>required</span></td>
<td><span>the memcache cluster to use</span></td>
</tr><tr>
<td><span>k</span></td>
<td><span>in</span></td>
<td><span>any string type</span></td>
<td><span>required</span></td>
<td><span>the name to identify the value</span></td>
</tr><tr>
<td><span>v</span></td>
<td><span>in</span></td>
<td><span>any string type</span></td>
<td><span>required</span></td>
<td><span>the value to overwrite with</span></td>
</tr>
</table></td>
</tr><tr>
<td><p class="pkg_label">Exceptions</p></td>
<td><p>An exception is thrown if no servers are defined in either cluster within the dual cluster</p></td>
</tr><tr>
<td><p class="pkg_label">Restrictions</p></td>
<td><p>Not allowed in a restricted shell or with the no_memcache restriction</p>
</tr><tr>
<td><p class="pkg_label">See Also</p></td>
<td><p><a href="#memcache.highread.add">memcache.highread.add</a><br><a href="#memcache.highread.set">memcache.highread.set</a></p>
</tr><tr>
<td><p class="pkg_label">Compare With</p></td>
<td><p>Ada: PegaSock.Memcache.Highread.Replace</p></td>
</tr>
</table>

<a name="memcache.highread.set"></a><h3>memcache.highread.set( cl, k, v )</h3>
<table cellspacing="0" cellpadding="0" width="98%" summary="package call">
<tr>
<td width="15%">&nbsp;</td>
<td><p>Assign value v as the current value for key k in memcache cluster cl.  If
the key already has a value, it will be overwritten.</p></td>
</tr><tr>
<td><p class="pkg_label">Example</p></td>
<td><span class="code">memcache.highread.set( mc_cluster, "company_name", "PegaSoft"  );<br>-- company_name is "PegaSoft" </span></p>
</tr><tr>
<td><p class="pkg_label">Parameters</p></td>
<td><table CELLSPACING=0 CELLPADDING=0 WIDTH="100%" border="0" >
<tr>
<td><span class="pkg_param">Param</span></td>
<td><span class="pkg_param">Mode</span></td>
<td><span class="pkg_param">Type</span></td>
<td><span class="pkg_param">Default</span></td>
<td><span class="pkg_param">Description</span></td>
</tr><tr>
<td><span>cl</span></td>
<td><span>in out</span></td>
<td><span>memcache.memcache_dual_cluster</span></td>
<td><span>required</span></td>
<td><span>the memcache cluster to use</span></td>
</tr><tr>
<td><span>k</span></td>
<td><span>in</span></td>
<td><span>any string type</span></td>
<td><span>required</span></td>
<td><span>the name to identify the value</span></td>
</tr><tr>
<td><span>v</span></td>
<td><span>in</span></td>
<td><span>any string type</span></td>
<td><span>required</span></td>
<td><span>the value to assign</span></td>
</tr>
</table></td>
</tr><tr>
<td><p class="pkg_label">Exceptions</p></td>
<td><p>An exception is thrown if no servers are defined in either cluster within the dual cluster</p></td>
</tr><tr>
<td><p class="pkg_label">Restrictions</p></td>
<td><p>Not allowed in a restricted shell or with the no_memcache restriction</p>
</tr><tr>
<td><p class="pkg_label">See Also</p></td>
<td><p><a href="#memcache.highread.add">memcache.highread.add</a><br><a href="#memcache.highread.replace">memcache.highread.replace</a></p>
</tr><tr>
<td><p class="pkg_label">Compare With</p></td>
<td><p>Ada: PegaSock.Memcache.Highread.Set</p></td>
</tr>
</table>

<a name="memcache.highread.set_cluster_name"></a><h3>memcache.highread.set_cluster_name( cl, s )</h3>
<table cellspacing="0" cellpadding="0" width="98%" summary="package call">
<tr>
<td width="15%">&nbsp;</td>
<td><p>Assign the string s as the name of the cluster.  The name is used in
some error messages.</p></td>
</tr><tr>
<td><p class="pkg_label">Example</p></td>
<td><span class="code">memcache.highread.set_cluster_name( mc_cluster, "main cluster" );</span></p>
</tr><tr>
<td><p class="pkg_label">Parameters</p></td>
<td><table CELLSPACING=0 CELLPADDING=0 WIDTH="100%" border="0" >
<tr>
<td><span class="pkg_param">Param</span></td>
<td><span class="pkg_param">Mode</span></td>
<td><span class="pkg_param">Type</span></td>
<td><span class="pkg_param">Default</span></td>
<td><span class="pkg_param">Description</span></td>
</tr><tr>
<td><span>cl</span></td>
<td><span>in out</span></td>
<td><span>memcache.memcache_dual_cluster</span></td>
<td><span>required</span></td>
<td><span>the memcache cluster to use</span></td>
</tr><tr>
<td><span>s</span></td>
<td><span>in</span></td>
<td><span>any string type</span></td>
<td><span>required</span></td>
<td><span>the name of the cluster</span></td>
</tr>
</table></td>
</tr><tr>
<td><p class="pkg_label">Exceptions</p></td>
<td><p>An exception is thrown if no servers are defined in either cluster within the dual cluster</p></td>
</tr><tr>
<td><p class="pkg_label">Restrictions</p></td>
<td><p>Not allowed in a restricted shell or with the no_memcache restriction</p>
</tr><tr>
<td><p class="pkg_label">See Also</p></td>
<td><p>-</p>
</tr><tr>
<td><p class="pkg_label">Compare With</p></td>
<td><p>Ada: PegaSock.Memcache.Highread.SetClusterName</p></td>
</tr>
</table>

<a name="memcache.highread.set_cluster_type"></a><h3>memcache.highread.set_cluster_type( cl, t )</h3>
<table cellspacing="0" cellpadding="0" width="98%" summary="package call">
<tr>
<td width="15%">&nbsp;</td>
<td><p>Assign the type of cluster.  Currently, there is only one type:
memcache.memcache_cluster_type.normal.</p></td>
</tr><tr>
<td><p class="pkg_label">Example</p></td>
<td><span class="code">memcache.highread.set_cluster_type( mc_cluster, memcache.memcache_cluster_type.normal );</span></p>
</tr><tr>
<td><p class="pkg_label">Parameters</p></td>
<td><table CELLSPACING=0 CELLPADDING=0 WIDTH="100%" border="0" >
<tr>
<td><span class="pkg_param">Param</span></td>
<td><span class="pkg_param">Mode</span></td>
<td><span class="pkg_param">Type</span></td>
<td><span class="pkg_param">Default</span></td>
<td><span class="pkg_param">Description</span></td>
</tr><tr>
<td><span>cl</span></td>
<td><span>in out</span></td>
<td><span>memcache.memcache_dual_cluster</span></td>
<td><span>required</span></td>
<td><span>the memcache cluster to use</span></td>
</tr><tr>
<td><span>s</span></td>
<td><span>in</span></td>
<td><span>memcache.highread.memcache_cluster_type</span></td>
<td><span>required</span></td>
<td><span>the type of cluster</span></td>
</tr>
</table></td>
</tr><tr>
<td><p class="pkg_label">Exceptions</p></td>
<td><p>An exception is thrown if no servers are defined in either cluster within the dual cluster</p></td>
</tr><tr>
<td><p class="pkg_label">Restrictions</p></td>
<td><p>Not allowed in a restricted shell or with the no_memcache restriction</p>
</tr><tr>
<td><p class="pkg_label">See Also</p></td>
<td><p>-</p>
</tr><tr>
<td><p class="pkg_label">Compare With</p></td>
<td><p>Ada: PegaSock.Memcache.Highread.SetClusterType</p></td>
</tr>
</table>

<a name="memcache.highread.stats"></a><h3>s := memcache.highread.stats( cl )</h3>
<table cellspacing="0" cellpadding="0" width="98%" summary="package call">
<tr>
<td width="15%">&nbsp;</td>
<td><p>Return detailed memached statistics for all servers in the cluster.  The
first item in the row is either "alpha" or "beta" followed by the server number.
For the meaning of the stats, consult the memcached documentation.</p></td>
</tr><tr>
<td><p class="pkg_label">Example</p></td>
<td><span class="code">? memcache.highread.stats( mc_cluster );-- display all stats</span></p>
</tr><tr>
<td><p class="pkg_label">Parameters</p></td>
<td><table CELLSPACING=0 CELLPADDING=0 WIDTH="100%" border="0" >
<tr>
<td><span class="pkg_param">Param</span></td>
<td><span class="pkg_param">Mode</span></td>
<td><span class="pkg_param">Type</span></td>
<td><span class="pkg_param">Default</span></td>
<td><span class="pkg_param">Description</span></td>
</tr><tr>
<td><span>cl</span></td>
<td><span>in out</span></td>
<td><span>memcache.memcache_dual_cluster</span></td>
<td><span>required</span></td>
<td><span>the memcache cluster to use</span></td>
</tr><tr>
<td><span>s</span></td>
<td><span>return value</span></td>
<td><span>string</span></td>
<td><span>required</span></td>
<td><span>the memcached stats</span></td>
</tr>
</table></td>
</tr><tr>
<td><p class="pkg_label">Exceptions</p></td>
<td><p>An exception is thrown if no servers are defined in either cluster within the dual cluster</p></td>
</tr><tr>
<td><p class="pkg_label">Restrictions</p></td>
<td><p>Not allowed in a restricted shell or with the no_memcache restriction</p>
</tr><tr>
<td><p class="pkg_label">See Also</p></td>
<td><p><a href="#memcache.highread.version">memcache.highread.version</a></p>
</tr><tr>
<td><p class="pkg_label">Compare With</p></td>
<td><p>Ada: PegaSock.Memcache.Highread.Stats</p></td>
</tr>
</table>

<a name="memcache.highread.version"><h3>s := memcache.highread.version( cl )</h3>
<table cellspacing="0" cellpadding="0" width="98%" summary="package call">
<tr>
<td width="15%">&nbsp;</td>
<td><p>Chooses a server from the cluster at random and display the version
of memcached that is running on the server.  (It would be advisable to run
the same version on all servers.)</p></td>
</tr><tr>
<td><p class="pkg_label">Example</p></td>
<td><span class="code">? memcache.highread.version( mc_cluster ); -- displays the version e.g. 1.4.5</span></p>
</tr><tr>
<td><p class="pkg_label">Parameters</p></td>
<td><table CELLSPACING=0 CELLPADDING=0 WIDTH="100%" order="0" >
<tr>
<td><span class="pkg_param">Param</span></td>
<td><span class="pkg_param">Mode</span></td>
<td><span class="pkg_param">Type</span></td>
<td><span class="pkg_param">Default</span></td>
<td><span class="pkg_param">Description</span></td>
</tr><tr>
<td><span>cl</span></td>
<td><span>in out</span></td>
<td><span>memcache.memcache_dual_cluster</span></td>
<td><span>required</span></td>
<td><span>the memcache cluster to use</span></td>
</tr><tr>
<td><span>s</span></td>
<td><span>return value</span></td>
<td><span>string</span></td>
<td><span>required</span></td>
<td><span>the memcached version</span></td>
</tr>
</table></td>
</tr><tr>
<td><p class="pkg_label">Exceptions</p></td>
<td><p>An exception is thrown if no servers are defined in either cluster within the dual cluster</p></td>
</tr><tr>
<td><p class="pkg_label">Restrictions</p></td>
<td><p>Not allowed in a restricted shell or with the no_memcache restriction</p>
</tr><tr>
<td><p class="pkg_label">See Also</p></td>
<td><p><a href="#memcache.highread.stats">memcache.highread.stats</a></p>
</tr><tr>
<td><p class="pkg_label">Compare With</p></td>
<td><p>Ada: PegaSock.Memcache.Highread.Version</p></td>
</tr>
</table>

&nbsp;<br>

			</td>
			<td bgcolor="#d3c7f8" width="150" align="right" valign="top"><noscript><hr /></noscript><img src="art/right_menu_top.png" width="150" height="24" alt="[Right Submenu]"><br><a name="submenu"></a>
                                <p class="rmt"><a class="rightmenutext" href="packages.html">&nbsp;Summary</a></p>
                                <p class="rmt"><a class="rightmenutext" href="pkg_arrays.html">&nbsp;arrays</a></p>
                                <p class="rmt"><a class="rightmenutext" href="pkg_btree_io.html">&nbsp;btree_io</a></p>
                                <p class="rmt"><a class="rightmenutext" href="pkg_calendar.html">&nbsp;calendar</a></p>
                                <p class="rmt"><a class="rightmenutext" href="pkg_cgi.html">&nbsp;cgi</a></p>
                                <p class="rmt"><a class="rightmenutext" href="pkg_chains.html">&nbsp;chains</a></p>
                                <p class="rmt"><a class="rightmenutext" href="pkg_cmdline.html">&nbsp;command_line</a></p>
                                <p class="rmt"><a class="rightmenutext" href="pkg_db.html">&nbsp;db/ postgresql</a></p>
                                <p class="rmt"><a class="rightmenutext" href="pkg_dbm.html">&nbsp;dbm</a></p>
                                <p class="rmt"><a class="rightmenutext" href="pkg_dirops.html">&nbsp;directory_operations</a></p>
                                <p class="rmt"><a class="rightmenutext" href="pkg_doubly.html">&nbsp;doubly_linked...</a></p>
                                <p class="rmt"><a class="rightmenutext" href="pkg_dht.html">&nbsp;dynamic_hash_...</a></p>
                                <p class="rmt"><a class="rightmenutext" href="pkg_enums.html">&nbsp;enums</a></p>
                                <p class="rmt"><a class="rightmenutext" href="pkg_exceptions.html">&nbsp;exceptions</a></p>
                                <p class="rmt"><a class="rightmenutext" href="pkg_files.html">&nbsp;files</a></p>
                                <p class="rmt"><a class="rightmenutext" href="pkg_gnat_cgi.html">&nbsp;gnat.cgi</a></p>
                                <p class="rmt"><a class="rightmenutext" href="pkg_gnat_crc32.html">&nbsp;gnat.crc32</a></p>
                                <p class="rmt"><a class="rightmenutext" href="pkg_hash_io.html">&nbsp;hash_io</a></p>
                                <p class="rmt"><a class="rightmenutext" href="pkg_l10n.html">&nbsp;l10n</a></p>
                                <p class="rmt"><a class="rightmenutext" href="pkg_lock_files.html">&nbsp;lock_files</a></p>
                                <p class="rmt"><a class="rightmenutext" href="pkg_logs.html">&nbsp;logs</a></p>
                                <p class="rmt"><a class="rightmenutext" href="pkg_memcache.html">&nbsp;memcache</a></p>
                                <p class="rmt"><a class="rightmenutext" href="pkg_memcache_highread.html">&nbsp;<b>memcache.highread</b></a></p>
                                <p class="rmt"><a class="rightmenutext" href="pkg_mysql.html">&nbsp;mysql</a></p>
                                <p class="rmt"><a class="rightmenutext" href="pkg_mysqlm.html">&nbsp;mysqlm</a></p>
                                <p class="rmt"><a class="rightmenutext" href="pkg_numerics.html">&nbsp;numerics</a></p>
                                <p class="rmt"><a class="rightmenutext" href="pkg_os.html">&nbsp;os</a></p>
                                <p class="rmt"><a class="rightmenutext" href="pkg_pen.html">&nbsp;pen</a></p>
                                <p class="rmt"><a class="rightmenutext" href="pkg_pengl.html">&nbsp;pen (OpenGL)</a></p>
                                <p class="rmt"><a class="rightmenutext" href="pkg_records.html">&nbsp;records</a></p>
                                <p class="rmt"><a class="rightmenutext" href="pkg_sound.html">&nbsp;sound</a></p>
                                <p class="rmt"><a class="rightmenutext" href="pkg_sinfo.html">&nbsp;source_info</a></p>
                                <p class="rmt"><a class="rightmenutext" href="pkg_stats.html">&nbsp;stats</a></p>
                                <p class="rmt"><a class="rightmenutext" href="pkg_strings.html">&nbsp;strings</a></p>
                                <p class="rmt"><a class="rightmenutext" href="pkg_system.html">&nbsp;System</a></p>
                                <p class="rmt"><a class="rightmenutext" href="pkg_teams.html">&nbsp;teams</a></p>
                                <p class="rmt"><a class="rightmenutext" href="pkg_templates.html">&nbsp;templates</a></p>
                                <p class="rmt"><a class="rightmenutext" href="pkg_text_io.html">&nbsp;text_io</a></p>
                                <p class="rmt"><a class="rightmenutext" href="pkg_units.html">&nbsp;units</a></p>
</a></p>

			</td>
		</tr>
		<tr>
			<td bgcolor="#d3c7f8" align="left" valign="middle"><a href="#top"><img src="art/up_arrow.png" border="0" width="24" height="27" alt="[Back to Top]"><span>&nbsp;Back To Top</span></a></td>
			<td bgcolor="#d3c7f8" align="center" valign="middle"><img src="art/forte_small.png" width="26" height="32" border="0" alt="[Small Forte Symbol]"></td>
	       	</tr>

	</table>

</body>
</html>

